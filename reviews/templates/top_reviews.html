{% extends "base.html" %}
{% load static %}
{% block content %}
<div class="max-w-5xl mx-auto mt-10">
    <h1 class="text-3xl font-semibold text-gray-800 mb-8 text-center">Top Reviews</h1>
    
    <div class="flex overflow-x-auto space-x-6 py-4">
        {% for review in top_reviews %}
            <div class="bg-white shadow-lg rounded-lg overflow-hidden min-w-[300px] w-72 flex-shrink-0 border border-secondary">
                <!-- Product Image -->
                <img src="{{ review.product_id.image_url }}" alt="{{ review.product_id.name }}" class="w-full h-48 object-cover">
                
                <div class="p-6">
                    <!-- Product and Reviewer Details -->
                    <h3 class="text-lg font-semibold text-gray-900 min-h-24">
                        {{ review.product_id.name}}
                    </h3>
                    <p class="text-gray-500">Reviewed by: 
                        {% if user.is_authenticated %}
                            {{ review.user_id.username }}
                        {% else %}
                            {{ review.user_id.username|slice:":1" }}{% for char in review.user_id.username %}*{% endfor %}
                        {% endif %}
                    </p>
                    
                    <!-- Rating and Likes -->
                    <div class="grid grid-cols-2">
                        <p class="text-yellow-500 font-semibold mr-4">Rating: {{ review.rating }} / 5</p>
                        <div class="grid grid-cols-2 justify-self-end gap-0">
                            <span class="text-gray-600 text-right">{{ review.num_likes }}</span>
                            <img src="{% static 'logos/likes.png' %}" alt="Likes" class="ml-0">
                        </div>
                    </div>
                    
                    <!-- Short Description -->
                    <p class="text-gray-700 mt-4">
                        {{ review.comment|truncatechars:30 }}
                    </p>

                    <!-- Link to Product GANTI LINK 'products:product_details'-->
                    <a href="{% url 'products:product_details' review.product_id.id %}"
                       class="border border-secondary bg-secondary block mt-6 text-white text-center font-bold py-2 rounded hover:bg-transparent hover:text-gray-500">
                        View Product
                    </a>
                </div>
            </div>
        {% endfor %}
    </div>
</div>
{% endblock %}
