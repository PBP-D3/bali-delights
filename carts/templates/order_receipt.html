{% extends 'base.html' %}
{% load static %}

{% block meta %}
  <title>Receipt</title>
  <script src="https://cdn.jsdelivr.net/npm/dompurify@3.1.7/dist/purify.min.js"></script>
{% endblock meta %}

{% block content %}
  <h1>Receipt</h1>
  <p>Transaction ID: {{ order.id }}</p>
  <p>Purchase Date: {{ order.created_at }}</p>
  <div>
    {% for item in items %}
      <div>
        <img src="{{ item.product.image_url|default:'static/images/fallback_image.png' }}" alt="{{ item.product.name }}" onerror="this.onerror=null; this.src='static/images/fallback_image.png';">
        <p>{{ item.product.name }} x {{ item.quantity }}</p>
        <p>Total: ${{ item.subtotal }}</p>
      </div>
    {% empty %}
      <p>No items found for this order.</p>
    {% endfor %}
    <p>Total Amount: ${{ order.total_price }}</p>
  </div>
{% endblock content %}